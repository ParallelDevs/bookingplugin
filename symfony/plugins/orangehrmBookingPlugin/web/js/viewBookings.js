function resourceErrorHandler(){}function resourceRenderHandler(e,t,a){e.isActive?t.addClass("booking-resource-active"):(t.addClass("booking-resource-inactive"),t.tipTip({content:inactiveResourceTooltip}),jQuery.isEmptyObject(a)||a.addClass("fc-nonbusiness"))}function eventErrorHandler(){}function eventRenderHandler(e,t,a){if(e.isHoliday)t.tipTip({content:holidayLabel+" "+e.title}),t.addClass("fc-nonbusiness booking-holiday");else if(t.tipTip({content:e.customerName+" - "+e.title}),a)switch(a.type){case"timelineMonth":t.find(".fc-time").text(e.duration+"h p/d"),t.find(".fc-title").remove();break;case"timelineWeek":t.find(".fc-title").text(e.duration+"h p/d");break;case"timelineDay":}}function eventAfterRender(e,t,a){}function eventMouseoverHandler(e,t,a){$(this).addClass("fc-highlighted")}function eventMouseoutHandler(e,t,a){$(this).removeClass("fc-highlighted")}function eventResizeHandler(e,t,a,n,o,i){bookingId=e.id,startDate=e.start.format("YYYY-MM-DD"),endDate=e.end.format("YYYY-MM-DD");var r=$("#calendar").fullCalendar("getResourceById",e.resourceId);r&&(bookableId=r.id,minStartTime=r.businessHours[0].start,maxEndTime=r.businessHours[0].end),$.ajax({type:"POST",url:bookingFormUrl,data:{bookingId:bookingId,bookableId:bookableId,startDate:startDate,endDate:endDate,minStartTime:minStartTime,maxEndTime:maxEndTime},success:function(e){$("#editBooking").find(".modal-body").html(e),initModalFields(),$("#editBooking").modal("show")},fail:function(){a()}})}function selectHandler(e,t,a,n,o){o&&(bookableId=o.id,bookableName=o.title,minStartTime=o.businessHours[0].start,maxEndTime=o.businessHours[0].end),startDate=e.format("YYYY-MM-DD");var i=t.subtract(1,"days");i.isBefore(startDate)&&(i=e),endDate=i.format("YYYY-MM-DD"),$.ajax({type:"POST",url:bookingFormUrl,data:{bookableId:bookableId,bookableName:bookableName,startDate:startDate,endDate:endDate,minStartTime:minStartTime,maxEndTime:maxEndTime},success:function(e){$("#addBooking").find(".modal-body").html(e),initModalFields(),$("#addBooking").modal("show")}})}function fillProjectSelect(e,t){var a=$(e);a.find("option").remove(),$("<option>").val("").text("").appendTo(a),$.each(t,function(e,t){$("<option>").val(t.projectId).text(t.name).appendTo(a)})}function customerChangeHandler(){var e=$(this).val();""!==e&&$.ajax({type:"POST",url:customerProjectUrl,data:{customerId:e},cache:!1,success:function(e){fillProjectSelect("#projectId",e)}})}function startDateChangeHandler(e,t){var a=$(e).val();""===$(t).val()&&$(t).val(a)}function initDateField(e){jQuery(e).datetimepicker({timepicker:!1,format:"Y-m-d",formatDate:"Y-m-d",dayOfWeekStart:firstDayOfWeek})}function initModalFields(){initDateField("#startDate"),initDateField("#endDate")}var bookingId="",bookableId="",bookableName="",startDate="",endDate="",minStartTime="",maxEndTime="";jQuery(document).ready(function(){$("#addBooking").on("change","#customerId",customerChangeHandler),$("#addBooking").on("change","#startDate",function(){startDateChangeHandler("#startDate","#endDate")})}),$(function(){$("#calendar").fullCalendar({schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",now:moment().startOf("day"),selectable:!0,selectHelper:!0,editable:!0,aspectRatio:4,firstDay:firstDayOfWeek,slotEventOverlap:!1,minTime:calendarMinTime,maxTime:calendarMaxTime,header:{left:"prev,next today",center:"title",right:"timelineDay,timelineWeek,timelineMonth"},defaultView:"timelineMonth",resourceAreaWidth:"25%",resourceLabelText:bookableResourceTitle,resources:{url:bookableResourcesUrl,type:"POST",error:resourceErrorHandler},events:{url:bookingResourcesUrl,data:{mode:"timeline"},type:"POST",error:eventErrorHandler},resourceRender:resourceRenderHandler,eventRender:eventRenderHandler,eventMouseover:eventMouseoverHandler,eventMouseout:eventMouseoutHandler,eventResize:eventResizeHandler,select:selectHandler})});